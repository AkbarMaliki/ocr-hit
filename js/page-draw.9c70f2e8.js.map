{"version":3,"file":"js/page-draw.9c70f2e8.js","mappings":"kJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,aAAa,CAAEJ,EAAIK,MAAOH,EAAG,MAAM,CAACI,YAAY,CAAC,SAAW,QAAQ,MAAQ,QAAQ,OAAS,QAAQ,KAAO,IAAI,IAAM,IAAI,UAAU,MAAM,WAAa,QAAQ,QAAU,SAASN,EAAIO,KAAMP,EAAIK,MAAOH,EAAG,MAAM,CAACI,YAAY,CAAC,SAAW,QAAQ,IAAM,MAAM,KAAO,MAAM,UAAY,oCAAoC,UAAU,MAAM,YAAY,SAAS,CAACJ,EAAG,MAAM,CAACE,YAAY,sEAAsE,CAACF,EAAG,SAAS,CAACE,YAAY,kCAAkCI,MAAM,CAAC,KAAO,UAAUC,GAAG,CAAC,MAAQ,SAASC,GAAQV,EAAIK,OAAM,CAAK,IAAI,CAACL,EAAIW,GAAG,OAAOT,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,KAAK,CAACF,EAAIW,GAAG,gBAAgBT,EAAG,MAAMA,EAAG,OAAO,CAACM,MAAM,CAAC,OAAS,IAAIC,GAAG,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOE,iBAAwBZ,EAAIa,WAAWC,MAAM,KAAMC,UAAU,IAAI,CAACb,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,QAAQ,CAACc,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOnB,EAAIoB,MAAM,SAAUC,WAAW,mBAAmBjB,YAAY,qCAAqCI,MAAM,CAAC,KAAO,OAAO,GAAK,QAAQ,KAAO,QAAQ,YAAc,SAASc,SAAS,CAAC,MAAStB,EAAIoB,MAAM,UAAWX,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOa,OAAOC,WAAiBxB,EAAIyB,KAAKzB,EAAIoB,MAAO,QAASV,EAAOa,OAAOJ,MAAM,OAAOjB,EAAG,MAAMA,EAAG,SAAS,CAACE,YAAY,yBAAyBI,MAAM,CAAC,KAAO,WAAW,CAACR,EAAIW,GAAG,oBAAoBX,EAAIO,KAAKL,EAAG,MAAMA,EAAG,MAAM,CAACI,YAAY,CAAC,SAAW,QAAQ,MAAQ,OAAO,IAAM,MAAM,UAAU,SAAS,CAACJ,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,SAAS,CAACE,YAAY,aAAasB,MAAM1B,EAAI2B,UAAU,WAAW,mBAAmBlB,GAAG,CAAC,MAAQT,EAAI4B,aAAa,CAAC1B,EAAG,IAAI,CAACE,YAAY,wBAAwBI,MAAM,CAAC,cAAc,cAAcN,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,SAAS,CAACE,YAAY,aAAasB,MAAM1B,EAAI6B,YAAY,eAAe,qBAAqBpB,GAAG,CAAC,MAAQT,EAAI8B,eAAe,CAAC5B,EAAG,IAAI,CAACE,YAAY,eAAeI,MAAM,CAAC,cAAc,cAAcN,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,SAAS,CAACE,YAAY,yBAAyBK,GAAG,CAAC,MAAQT,EAAI+B,UAAU,CAAC7B,EAAG,IAAI,CAACE,YAAY,iBAAiBI,MAAM,CAAC,cAAc,gBAAiBR,EAAI2B,UAAWzB,EAAG,MAAM,CAACF,EAAIW,GAAG,uBAAuBX,EAAIO,KAAMP,EAAI6B,YAAa3B,EAAG,MAAM,CAACF,EAAIW,GAAG,sBAAsBX,EAAIO,KAAKL,EAAG,MAAM,CAAC8B,IAAI,iBAAiB5B,YAAY,kBAAkBE,YAAY,CAAC,SAAW,WAAW,SAAW,OAAO,OAAS,UAAUG,GAAG,CAAC,UAAY,SAASC,GAAgC,OAAxBA,EAAOE,iBAAwBZ,EAAIiC,UAAUnB,MAAM,KAAMC,UAAU,EAAE,UAAYf,EAAIkC,UAAU,QAAUlC,EAAImC,UAAU,CAACjC,EAAG,MAAM,CAACM,MAAM,CAAC,IAAMR,EAAIoC,SAAS,IAAM,GAAG,GAAK,cAAcpC,EAAIqC,GAAIrC,EAAIsC,YAAY,SAASC,EAAKC,GAAO,OAAOtC,EAAG,MAAM,CAACuC,IAAID,EAAMpC,YAAY,YAAYsC,MAAO1C,EAAI2C,mBAAmBJ,GAAO9B,GAAG,CAAC,MAAQ,SAASC,GAAiC,OAAzBA,EAAOkC,kBAAyB5C,EAAI6C,gBAAgBL,EAAM,IAAI,KAAI,GAAGtC,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,IAAI,CAACF,EAAIW,GAAG,WAAWX,EAAI8C,GAAG9C,EAAI+C,KAAKC,UAAU9C,EAAG,QAAQF,EAAIqC,GAAIrC,EAAIsC,YAAY,SAASS,EAAKP,GAAO,OAAOtC,EAAG,MAAM,CAACuC,IAAID,EAAM,aAAapC,YAAY,SAAS,CAACF,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,IAAI,CAACE,YAAY,mBAAmB,CAACJ,EAAIW,GAAG,WAAWX,EAAI8C,GAAGC,EAAKE,UAAU/C,EAAG,IAAI,CAACE,YAAY,mBAAmB,CAACJ,EAAIW,GAAG,YAAYX,EAAI8C,GAAGC,EAAKG,WAAWhD,EAAG,IAAI,CAACE,YAAY,mBAAmB,CAACJ,EAAIW,GAAG,WAAWX,EAAI8C,GAAGC,EAAKI,UAAUjD,EAAG,IAAI,CAACE,YAAY,mBAAmB,CAACJ,EAAIW,GAAG,OAAOX,EAAI8C,GAAGC,EAAKK,MAAMlD,EAAG,IAAI,CAACE,YAAY,mBAAmB,CAACJ,EAAIW,GAAG,OAAOX,EAAI8C,GAAGC,EAAKM,SAAS,KAAI,GAAGnD,EAAG,OAC9+G,EACIoD,EAAkB,GCoEtB,G,QAAA,CACAC,OACA,OACAjB,WAAA,GACAkB,UAAA,GACAC,SAAA,EACAC,MAAA,CAAAN,EAAA,EAAAC,EAAA,GACAjB,SAAA,4CACAT,WAAA,EACAE,aAAA,EACAxB,OAAA,EACAsD,UAAA,GACAC,UAAA,GACAb,KAAA,GACA3B,MAAA,GAEA,EACAyC,QAAA,CACA,mBACA,IAAAC,EAAA,KACA,MAAAC,EAAAC,SAAAC,IAAAD,SAAAE,UAAA,mBAAAC,OAAAC,MAAAC,IACA,KAAA/B,WAAA,KAAAA,WAAAgC,OAAA,iBAAAlD,MAAA6B,MACAe,SAAAO,UAAAR,EAAA,CAAAS,MAAA,KAAAlC,aACAmC,MAAA,KACAX,EAAAzD,OAAA,EACAyD,EAAA1C,MAAA,MAEAsD,OAAAC,IACAC,QAAAD,MAAA,2BAAAA,EAAA,GAEA,EACA5C,UACA,MAAAgC,EAAAC,SAAAC,IAAAD,SAAAE,UAAA,mBAAAC,OAAAC,MAAAC,IACAL,SAAAO,UAAAR,EAAA,CAAAS,MAAA,KAAAlC,aACAmC,MAAA,SAEAC,OAAAC,IACAC,QAAAD,MAAA,2BAAAA,EAAA,GAEA,EACA,gBACA,IAAAb,EAAA,KACA,MAAAC,EAAAC,SAAAC,IAAAD,SAAAE,UAAA,cAAAJ,EAAAK,OAAAC,MAAAC,IACAL,SAAAa,OAAAd,GACAU,MAAAK,IACA,GAAAA,EAAAC,SAAA,CACA,IAAAC,EAAAF,EAAAvB,OACAO,EAAAf,KAAAiC,EACAA,EAAAR,QACAV,EAAAxB,WAAA0C,EAAAR,OAEAV,EAAA1B,SAAA,mCAAA4C,EAAAC,SACAL,QAAAM,IAAA,iBAAAJ,EAAAvB,OACA,MACAqB,QAAAM,IAAA,0BACA,IAEAR,OAAAC,IACAC,QAAAD,MAAA,0BAAAA,EAAA,GAEA,EACA1C,UAAAkD,GACA,SAAAtD,aAAA,KAAAF,UAAA,CACA,KAAA8B,SAAA,EACA,cAAA2B,EAAA,QAAAC,GAAAF,EACA,KAAAzB,MAAA,CAAAN,EAAAgC,EAAA/B,EAAAgC,GACA,KAAA/C,WAAAgD,KAAA,SAAA5B,MAAAP,MAAA,EAAAD,OAAA,GACA,CACA,EACAhB,UAAAiD,GACA,SAAAtD,aAAA,KAAAF,WAAA,KAAA8B,QAAA,CACA,cAAA2B,EAAA,QAAAC,GAAAF,GACA,EAAA/B,EAAA,EAAAC,GAAA,KAAAK,MACA6B,EAAA,KAAAjD,WAAA,KAAAA,WAAAgC,OAAA,GACAiB,EAAApC,MAAAiC,EAAAhC,EACAmC,EAAArC,OAAAmC,EAAAhC,EACA,KAAAmC,oBACA,CACA,EACArD,UACA,KAAAsB,UACAmB,QAAAM,IAAA,WAAA5C,WAAA,KAAAA,WAAAgC,OAAA,IACA,QAAAhC,WAAA,KAAAA,WAAAgC,OAAA,qBAAAhC,WAAA,KAAAA,WAAAgC,OAAA,eACA,KAAAjE,OAAA,IAGA,KAAAiC,WAAA,KAAAA,WAAAmD,QAAAN,GAAA,GAAAA,EAAAhC,OAAA,GAAAgC,EAAAjC,SACA,KAAAvB,YACA,KAAA8B,SAAA,EAEA,EACAZ,gBAAAL,GACA,KAAAX,cACA,KAAAS,WAAAoD,OAAAlD,EAAA,GACA,KAAAgD,qBACA,KAAAzD,UACA,EACAY,oBAAA,EAAAS,EAAA,EAAAC,EAAA,MAAAF,EAAA,OAAAD,IACA,OACAyC,SAAA,WACAC,KAAA,GAAAxC,MACAyC,IAAA,GAAAxC,MACAF,MAAA,GAAAA,MACAD,OAAA,GAAAA,MACA4C,OAAA,gBAEA,EAEAC,OACA,KAAAzD,WAAAgC,OAAA,IACA,KAAAV,UAAA0B,KAAA,KAAAhD,WAAA0D,OACA,KAAAR,qBACA,KAAAzD,UAEA,EAGAkE,OACA,KAAArC,UAAAU,OAAA,IACA,KAAAhC,WAAAgD,KAAA,KAAA1B,UAAAoC,OACA,KAAAR,qBACA,KAAAzD,UAEA,EACAH,aACA,KAAAD,WAAA,KAAAA,UACA,KAAAE,aAAA,CACA,EACAC,eACA,KAAAD,aAAA,KAAAA,YACA,KAAAF,WAAA,CACA,EACA6D,qBACA,GAGAU,UACA,KAAAC,UACAC,SAAAC,iBAAA,WAAAC,IACAA,EAAAC,SAAA,MAAAD,EAAA7D,IACA,KAAAsD,OACAO,EAAAC,SAAA,MAAAD,EAAA7D,KACA,KAAAwD,MACA,GAEA,EACAO,UACAC,aAAAC,QAAA,gBACA,KAAApE,WAAAqE,KAAAC,MAAAH,aAAAC,QAAA,eAEA,IC5NoP,I,UCQhPG,GAAY,OACd,EACA9G,EACAuD,GACA,EACA,KACA,WACA,MAIF,EAAeuD,EAAiB,O","sources":["webpack://new/./src/pages/draw.vue","webpack://new/src/pages/draw.vue","webpack://new/./src/pages/draw.vue?0e23","webpack://new/./src/pages/draw.vue?6f9d"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[(_vm.modal)?_c('div',{staticStyle:{\"position\":\"fixed\",\"width\":\"100vw\",\"height\":\"100vh\",\"left\":\"0\",\"top\":\"0\",\"z-index\":\"100\",\"background\":\"black\",\"opacity\":\"0.6\"}}):_vm._e(),(_vm.modal)?_c('div',{staticStyle:{\"position\":\"fixed\",\"top\":\"50%\",\"left\":\"50%\",\"transform\":\"translateX(-50%) translateY(-50%)\",\"z-index\":\"105\",\"min-width\":\"50vw\"}},[_c('div',{staticClass:\"rounded-lg shadow p-3 bg-white animate__animated animate__bounceIn\"},[_c('button',{staticClass:\"btn btn-sm btn-dark float-right\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.modal=false}}},[_vm._v(\"x\")]),_c('div',{staticClass:\"p-3\"},[_c('h4',[_vm._v(\"Form Input\")]),_c('hr'),_c('form',{attrs:{\"action\":\"\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.submitForm.apply(null, arguments)}}},[_c('div',{staticClass:\"sm-form\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.vdata['field']),expression:\"vdata['field']\"}],staticClass:\"form-control p-2 rounded-lg shadow\",attrs:{\"type\":\"text\",\"id\":\"field\",\"name\":\"field\",\"placeholder\":\"field\"},domProps:{\"value\":(_vm.vdata['field'])},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.vdata, 'field', $event.target.value)}}})]),_c('hr'),_c('button',{staticClass:\"btn btn-sm btn-success\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Simpan\")])])])])]):_vm._e(),_c('br'),_c('div',{staticStyle:{\"position\":\"fixed\",\"right\":\"30px\",\"top\":\"50%\",\"z-index\":\"1000\"}},[_c('div',{staticClass:\"mt-2\"},[_c('button',{staticClass:\"btn btn-sm\",class:_vm.drawState?'btn-dark':'btn-outline-dark',on:{\"click\":_vm.toggleDraw}},[_c('i',{staticClass:\"fa fa-pencil-square-o\",attrs:{\"aria-hidden\":\"true\"}})])]),_c('div',{staticClass:\"mt-2\"},[_c('button',{staticClass:\"btn btn-sm\",class:_vm.deleteState?' btn-danger ':'btn-outline-danger',on:{\"click\":_vm.toggleDelete}},[_c('i',{staticClass:\"fa fa-eraser\",attrs:{\"aria-hidden\":\"true\"}})])]),_c('div',{staticClass:\"mt-2\"},[_c('button',{staticClass:\"btn btn-sm btn-success\",on:{\"click\":_vm.saveBox}},[_c('i',{staticClass:\"fa fa-floppy-o\",attrs:{\"aria-hidden\":\"true\"}})])])]),(_vm.drawState)?_c('div',[_vm._v(\"Drawing Active...\")]):_vm._e(),(_vm.deleteState)?_c('div',[_vm._v(\"Delete Active...\")]):_vm._e(),_c('div',{ref:\"imageContainer\",staticClass:\"image-container\",staticStyle:{\"position\":\"relative\",\"overflow\":\"auto\",\"height\":\"1000px\"},on:{\"mousedown\":function($event){$event.preventDefault();return _vm.mousedown.apply(null, arguments)},\"mousemove\":_vm.mousemove,\"mouseup\":_vm.mouseup}},[_c('img',{attrs:{\"src\":_vm.imageUrl,\"alt\":\"\",\"id\":\"original\"}}),_vm._l((_vm.rectangles),function(rect,index){return _c('div',{key:index,staticClass:\"rectangle\",style:(_vm.getRectangleStyles(rect)),on:{\"click\":function($event){$event.stopPropagation();return _vm.deleteRectangle(index)}}})})],2),_c('div',{staticClass:\"p-2 row\"},[_c('div',{staticClass:\"col-12\"},[_c('p',[_vm._v(\"Table : \"+_vm._s(_vm.item.table))]),_c('hr')]),_vm._l((_vm.rectangles),function(item,index){return _c('div',{key:index+'rectangles',staticClass:\"col-3\"},[_c('div',{staticClass:\"p-2 shadow rounded-sm\"},[_c('p',{staticClass:\"m-0 p-0 text-xs\"},[_vm._v(\"Field : \"+_vm._s(item.field))]),_c('p',{staticClass:\"m-0 p-0 text-xs\"},[_vm._v(\"height : \"+_vm._s(item.height))]),_c('p',{staticClass:\"m-0 p-0 text-xs\"},[_vm._v(\"width : \"+_vm._s(item.width))]),_c('p',{staticClass:\"m-0 p-0 text-xs\"},[_vm._v(\"x : \"+_vm._s(item.x))]),_c('p',{staticClass:\"m-0 p-0 text-xs\"},[_vm._v(\"y : \"+_vm._s(item.y))])])])})],2),_c('hr')])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <!-- MODAL -->\r\n    <div v-if=\"modal\"  style=\"position:fixed;width:100vw;height:100vh;left:0;top:0;z-index:100;background:black;opacity:0.6\"></div>\r\n    <div v-if=\"modal\" style=\"position: fixed;top: 50%;left: 50%;transform: translateX(-50%) translateY(-50%);z-index:105;min-width:50vw;\">\r\n        <div class=\"rounded-lg shadow p-3 bg-white animate__animated animate__bounceIn\">\r\n          <button type=\"button\" @click=\"modal=false\" class=\"btn btn-sm btn-dark  float-right\">x</button>\r\n            <div class=\"p-3 \">\r\n              <h4>Form Input</h4>\r\n              <hr>\r\n              <form action=\"\" @submit.prevent=\"submitForm\">\r\n                <div class=\"sm-form \">\r\n                    <input type=\"text\" id=\"field\" name=\"field\" class=\"form-control p-2 rounded-lg shadow\" placeholder=\"field\" v-model=\"vdata['field']\" >\r\n                </div>\r\n                <hr>\r\n                <button type=\"submit\" class=\"btn btn-sm btn-success\">Simpan</button>\r\n              </form>\r\n            </div>      \r\n        </div>\r\n    </div>\r\n        <!-- MODAL -->\r\n    <br>\r\n    <div class=\"\" style=\"position:fixed;right:30px;top:50%;z-index:1000;\">\r\n      <div class=\"mt-2\">\r\n        <button @click=\"toggleDraw\" class=\"btn btn-sm \" :class=\"drawState?'btn-dark':'btn-outline-dark'\"><i class=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i></button>\r\n      </div>\r\n      <div class=\"mt-2\">\r\n        <button @click=\"toggleDelete\"  class=\"btn btn-sm\" :class=\"deleteState?' btn-danger ':'btn-outline-danger'\"><i class=\"fa fa-eraser\" aria-hidden=\"true\"></i></button>\r\n      </div>\r\n      <div class=\"mt-2\">\r\n        <button @click=\"saveBox\" class=\"btn btn-sm btn-success \"><i class=\"fa fa-floppy-o\" aria-hidden=\"true\"></i></button>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"drawState\">Drawing Active...</div>\r\n    <div v-if=\"deleteState\">Delete Active...</div>\r\n    <div class=\"image-container\" \r\n      @mousedown.prevent=\"mousedown\"\r\n      @mousemove=\"mousemove\"\r\n      @mouseup=\"mouseup\"\r\n      ref=\"imageContainer\"\r\n      style=\"position: relative; overflow: auto; height: 1000px;\">\r\n      <img :src=\"imageUrl\" alt=\"\" id=\"original\">\r\n      <div\r\n        v-for=\"(rect, index) in rectangles\"\r\n        :key=\"index\"\r\n        :style=\"getRectangleStyles(rect)\"\r\n        class=\"rectangle\"\r\n        @click.stop=\"deleteRectangle(index)\"\r\n      ></div>\r\n    </div>\r\n    <div class=\"p-2 row\">\r\n      <div class=\"col-12\">\r\n        <p>Table : {{item.table}}</p>\r\n        <hr>\r\n      </div>\r\n      <div v-for=\"(item, index) in rectangles\" :key=\"index+'rectangles'\" class=\"col-3\">\r\n        <div class=\"p-2 shadow rounded-sm\">\r\n          <p class=\"m-0 p-0 text-xs\">Field : {{item.field}}</p>\r\n          <p class=\"m-0 p-0 text-xs\">height : {{item.height}}</p>\r\n          <p class=\"m-0 p-0 text-xs\">width : {{item.width}}</p>\r\n          <p class=\"m-0 p-0 text-xs\">x : {{item.x}}</p>\r\n          <p class=\"m-0 p-0 text-xs\">y : {{item.y}}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <hr>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n        return {\r\n          rectangles: [],\r\n          resizeBox:[],\r\n          drawing: false,\r\n          start: { x: 0, y: 0 },\r\n          imageUrl: 'https://hit-ocr.online/uploaded/image.jpg',\r\n          drawState: false,\r\n          deleteState: false,\r\n          modal:false,\r\n          undoStack: [], // Array to store rectangles for undo\r\n          redoStack: [], // Array to store rectangles for redo\r\n          item:{},\r\n          vdata:{}\r\n        };\r\n    },\r\n    methods: {\r\n      async submitForm(){\r\n        let that=this\r\n        const docRef = firebase.doc(firebase.firestore, 'ocr-layouts', this.$route.query.id);\r\n        this.rectangles[this.rectangles.length-1]['field']=this.vdata.field\r\n        firebase.updateDoc(docRef, {boxes:this.rectangles})\r\n        .then(() => {\r\n          that.modal=false\r\n          that.vdata={}\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error updating document:', error);\r\n        });\r\n      },\r\n      saveBox(){\r\n        const docRef = firebase.doc(firebase.firestore, 'ocr-layouts', this.$route.query.id);\r\n        firebase.updateDoc(docRef, {boxes:this.rectangles})\r\n        .then(() => {\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error updating document:', error);\r\n        });\r\n      },\r\n       async getData(){\r\n          let that=this;\r\n          const docRef = firebase.doc(firebase.firestore, 'ocr-layouts', that.$route.query.id);\r\n          firebase.getDoc(docRef)\r\n            .then((docSnapshot) => {\r\n              if (docSnapshot.exists()) {\r\n                let obj=docSnapshot.data();\r\n                that.item=obj;\r\n                if(obj.boxes){\r\n                  that.rectangles=obj.boxes\r\n                }\r\n                that.imageUrl=`https://hit-ocr.online/uploaded/`+obj.filename\r\n                console.log('Document data:', docSnapshot.data());\r\n              } else {\r\n                console.log('Document does not exist');\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              console.error('Error getting document:', error);\r\n            });\r\n      },\r\n      mousedown(e) {\r\n        if (!this.deleteState && this.drawState) {\r\n          this.drawing = true;\r\n          const { offsetX, offsetY } = e;\r\n          this.start = { x: offsetX, y: offsetY };\r\n          this.rectangles.push({ ...this.start, width: 0, height: 0 });\r\n        }\r\n      },\r\n      mousemove(e) {\r\n        if (!this.deleteState && this.drawState && this.drawing) {\r\n          const { offsetX, offsetY } = e;\r\n          const { x, y } = this.start;\r\n          const rectangle = this.rectangles[this.rectangles.length - 1];\r\n          rectangle.width = offsetX - x;\r\n          rectangle.height = offsetY - y;\r\n          this.saveToLocalStorage();\r\n        }\r\n      },\r\n      mouseup() {\r\n        if(this.drawing){\r\n          console.log('cek',this.rectangles[this.rectangles.length-1])\r\n          if(this.rectangles[this.rectangles.length-1]['width']!=0 && this.rectangles[this.rectangles.length-1]['height']!=0){\r\n            this.modal=true;\r\n          }\r\n        }\r\n        this.rectangles=this.rectangles.filter(e=>e.width!=0 && e.height!=0)\r\n        if (this.drawState) {\r\n          this.drawing = false;\r\n        }\r\n      },\r\n      deleteRectangle(index) {\r\n        if (!this.deleteState) return;\r\n        this.rectangles.splice(index, 1);\r\n        this.saveToLocalStorage();\r\n        this.saveBox()\r\n      },\r\n      getRectangleStyles({ x, y, width, height }) {\r\n        return {\r\n          position: 'absolute',\r\n          left: `${x}px`,\r\n          top: `${y}px`,\r\n          width: `${width}px`,\r\n          height: `${height}px`,\r\n          border: '1px solid red',\r\n        };\r\n      },\r\n    // New method to undo the last drawing action\r\n    undo() {\r\n      if (this.rectangles.length > 0) {\r\n        this.redoStack.push(this.rectangles.pop());\r\n        this.saveToLocalStorage();\r\n        this.saveBox()\r\n      }\r\n    },\r\n\r\n    // New method to redo the previously undone drawing action\r\n    redo() {\r\n      if (this.redoStack.length > 0) {\r\n        this.rectangles.push(this.redoStack.pop());\r\n        this.saveToLocalStorage();\r\n        this.saveBox()\r\n      }\r\n    },\r\n      toggleDraw() {\r\n        this.drawState = !this.drawState;\r\n        this.deleteState = false;\r\n      },\r\n      toggleDelete() {\r\n        this.deleteState = !this.deleteState;\r\n        this.drawState = false;\r\n      },\r\n      saveToLocalStorage() {\r\n        // localStorage.setItem(\"rectangles\", JSON.stringify(this.rectangles));\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getData()\r\n        document.addEventListener(\"keydown\",(event)=>{\r\n            if (event.ctrlKey && event.key === 'z') {\r\n                this.undo();\r\n            } else if (event.ctrlKey && event.key === 'y') {\r\n                this.redo();\r\n            }\r\n        })\r\n    },\r\n    created() {\r\n      if (localStorage.getItem(\"rectangles\")) {\r\n        this.rectangles = JSON.parse(localStorage.getItem(\"rectangles\"));\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n.rectangle {\r\n  background-color: rgba(255, 0, 0, 0.5);\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./draw.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./draw.vue?vue&type=template&id=63aea742&scoped=true&\"\nimport script from \"./draw.vue?vue&type=script&lang=js&\"\nexport * from \"./draw.vue?vue&type=script&lang=js&\"\nimport style0 from \"./draw.vue?vue&type=style&index=0&id=63aea742&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63aea742\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","modal","staticStyle","_e","attrs","on","$event","_v","preventDefault","submitForm","apply","arguments","directives","name","rawName","value","vdata","expression","domProps","target","composing","$set","class","drawState","toggleDraw","deleteState","toggleDelete","saveBox","ref","mousedown","mousemove","mouseup","imageUrl","_l","rectangles","rect","index","key","style","getRectangleStyles","stopPropagation","deleteRectangle","_s","item","table","field","height","width","x","y","staticRenderFns","data","resizeBox","drawing","start","undoStack","redoStack","methods","that","docRef","firebase","doc","firestore","$route","query","id","length","updateDoc","boxes","then","catch","error","console","getDoc","docSnapshot","exists","obj","filename","log","e","offsetX","offsetY","push","rectangle","saveToLocalStorage","filter","splice","position","left","top","border","undo","pop","redo","mounted","getData","document","addEventListener","event","ctrlKey","created","localStorage","getItem","JSON","parse","component"],"sourceRoot":""}