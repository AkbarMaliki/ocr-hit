"use strict";(self["webpackChunknew"]=self["webpackChunknew"]||[]).push([[313],{6769:function(t,a,e){e.r(a),e.d(a,{default:function(){return l}});e(7658);var i=function(){var t=this,a=t._self._c;return a("div",[a("button",{staticClass:"btn btn-sm btn-dark rounded-circle",staticStyle:{position:"fixed",bottom:"80px",right:"30px","z-index":"100",height:"40px",width:"40px"},attrs:{type:"button"},on:{click:function(a){t.formModal=!t.formModal,t.formAction="add",t.vdata={}}}},[t._v(" + ")]),t.formModal?a("div",{staticStyle:{position:"fixed",width:"100vw",height:"100vh",left:"0",top:"0","z-index":"100",background:"black",opacity:"0.5"},on:{click:function(a){t.formModal=!1}}}):t._e(),t.formModal?a("div",{staticStyle:{position:"fixed",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)","z-index":"105","min-width":"55vw"}},[a("div",{staticClass:"rounded-lg shadow p-3 bg-white animate__animated animate__bounceIn"},[a("div",{staticClass:"p-4 font-semibold"},[t._v("Add Layouts")]),a("hr"),a("form",{attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.submitLayout.apply(null,arguments)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata["nama_doc"],expression:"vdata['nama_doc']"}],staticClass:"form-control p-2 rounded-lg shadow mt-3",attrs:{required:"",type:"text",id:"nama_doc",name:"nama_doc",placeholder:"nama_doc"},domProps:{value:t.vdata["nama_doc"]},on:{input:function(a){a.target.composing||t.$set(t.vdata,"nama_doc",a.target.value)}}}),a("div",{staticClass:"sm-form"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.vdata.deskripsi,expression:"vdata.deskripsi"}],staticClass:"form-control md-textarea mt-2",attrs:{required:"",type:"text",id:"deskripsi",name:"deskripsi",rows:"2",placeholder:"deskripsi..."},domProps:{value:t.vdata.deskripsi},on:{input:function(a){a.target.composing||t.$set(t.vdata,"deskripsi",a.target.value)}}})]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vdata["table"],expression:"vdata['table']"}],staticClass:"form-control p-2 rounded-lg shadow mt-3",attrs:{required:"",type:"text",id:"table",name:"table",placeholder:"Nama table"},domProps:{value:t.vdata["table"]},on:{input:function(a){a.target.composing||t.$set(t.vdata,"table",a.target.value)}}}),a("input",{staticClass:"form-control p-2 rounded-lg shadow mt-3",attrs:{required:"",type:"file",id:"filenya",name:"filenya",placeholder:"filenya"},on:{change:t.upload}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.vdata.dimension,expression:"vdata.dimension"}],staticClass:"form-control mt-2",attrs:{required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.vdata,"dimension",a.target.multiple?e:e[0])}}},[a("option",{attrs:{value:"potrait"}},[t._v("Potrait")]),a("option",{attrs:{value:"landscape"}},[t._v("Landscape")])]),a("div",{staticClass:"text-right"},["add"==t.formAction?a("button",{staticClass:"btn btn-sm btn-outline-primary text-sm mt-3",attrs:{type:"submit"}},[t._v(" Simpan ")]):a("button",{staticClass:"btn btn-sm btn-outline-success text-sm mt-3",attrs:{type:"submit"}},[t._v(" Edit ")])])])])]):t._e(),a("div",{staticClass:"row test",staticStyle:{"min-height":"60vh"}},[a("div",{staticClass:"col-12 p-4 mt-2"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-7 pl-4"},[a("div",{staticClass:"sm-form"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control p-2 rounded-lg shadow",attrs:{type:"text",id:"search",name:"search",placeholder:"search"},domProps:{value:t.search},on:{input:function(a){a.target.composing||(t.search=a.target.value)}}})])]),a("div",{staticClass:"col-4 col-sm-2"},[a("button",{staticClass:"btn btn-sm btn-dark rounded-lg btn-block p-2",attrs:{type:"button"},on:{click:function(a){t.formModal=!t.formModal,t.formAction="add",t.vdata={}}}},[t._v(" Add New + ")])])]),a("div",{staticClass:"row px-5 py-3"},t._l(t.datanya,(function(e,i){return a("div",{key:i+"datanya",staticClass:"col-sm-4 px-2"},[a("div",{staticClass:"p-4 card-border rounded-lg shadow-lg text-sm"},[a("button",{staticClass:"btn btn-sm btn-danger text-xs float-right",attrs:{type:"button"},on:{click:function(a){return t.removeData(e)}}},[a("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}}),t._v(" Remove ")]),a("div",[a("span",{staticClass:"text-xs"},[t._v(t._s(e.nama_doc))])]),a("hr"),a("div",{staticClass:"text-xs font-semibold float-right"},[a("div",[t._v("Height : "+t._s(e.height))]),a("div",[t._v("Width : "+t._s(e.width))])]),a("div",{staticClass:"text-xs",class:e.deskripsi?"text-gray-600":""},[t._v(" "+t._s(e.deskripsi??"No Deskripsi")+" ")]),a("img",{directives:[{name:"viewer",rawName:"v-viewer"}],staticStyle:{width:"30px",height:"40px"},attrs:{src:`https://hit-ocr.online/uploaded/${e.filename}`,alt:""}}),a("br"),a("hr"),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("button",{staticClass:"btn btn-sm btn-outline-dark btn-block text-xs",attrs:{type:"button"},on:{click:function(a){return t.$router.push(`/database?id=${e._id}&table=${e.table}`)}}},[a("i",{staticClass:"fa fa-eye",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"col-3"},[a("button",{staticClass:"btn btn-sm btn-secondary btn-block text-xs",attrs:{type:"button"},on:{click:function(a){return t.$router.push(`/scan?id=${e._id}`)}}},[a("i",{staticClass:"fa fa-camera-retro",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"col-3"},[a("button",{staticClass:"btn btn-sm btn-dark btn-block text-xs",attrs:{type:"button"},on:{click:function(a){return t.$router.push(`/drawMobile?id=${e._id}`)}}},[a("i",{staticClass:"fa fa-paint-brush",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"col-3"},[a("button",{staticClass:"btn btn-sm btn-success btn-block text-xs",attrs:{type:"button"},on:{click:function(a){t.formModal=!0,t.formAction="update",t.vdata=JSON.parse(JSON.stringify(e))}}},[a("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})])])])])])})),0)])])])},s=[],o={data(){return{vdata:{},formAction:"add",datanya:[],search:"",formModal:!1}},methods:{async resizeImageFile(t,a,e){return new Promise(((i,s)=>{t.type.startsWith("image/")||s(new Error("The input file is not an image."));const o=new FileReader;o.onload=async o=>{const n=new Image;n.onload=()=>{const s=document.createElement("canvas");s.width=a,s.height=e;const o=s.getContext("2d");o.drawImage(n,0,0,a,e),s.toBlob((a=>{i(new File([a],t.name,{type:t.type}))}),t.type,1)},n.onerror=()=>{s(new Error("Failed to load the image file."))},n.src=o.target.result},o.readAsDataURL(t)}))},async upload(t){let a=this;var e=await this.getDimensionsFromFile(t.target.files[0]);console.log("dimensions",e);var i={quality:.7,width:1080,height:1920,debug:!0};e.height>e.width?(this.vdata.dimension="potrait",i={quality:.7,width:1080,height:1920,debug:!0}):(this.vdata.dimension="landscape",i={quality:.7,width:1920,height:1080,debug:!0});let s=await this.resizeImageFile(t.target.files[0],i.width,i.height);e=await this.getDimensionsFromFile(s);console.log("dimensions",e),this.vdata.height=e.height,this.vdata.width=e.width,console.log("file",s);const o=this.vdata.nama_doc+t.target.files[0].name,n=new File([s],o,{type:s.type});this.$forceUpdate();let r=new FormData;r.append("file",n),axios.post("https://hit-ocr.online/api/upload/image",r).then((t=>{a.vdata.filename=this.vdata.nama_doc+s.name,alert("Upload Berhasil...")}))},getDimensionsFromFile(t){return new Promise(((a,e)=>{const i=new FileReader;i.onload=function(t){const i=new Image;i.onload=function(){const t=i.width,e=i.height;a({width:t,height:e})},i.onerror=function(){e("Error loading image.")},i.src=t.target.result},i.onerror=function(){e("Error reading file.")},i.readAsDataURL(t)}))},getDimension(){"1"==this.vdata.dimension?(this.vdata.height=1920,this.vdata.width=1080):"2"==this.vdata.dimension&&(this.vdata.height=1080,this.vdata.width=1920)},async submitLayout(){if("add"==this.formAction){const t=firebase.collection(firebase.firestore,"ocr-layouts");this.formModal=!1,firebase.addDoc(t,this.vdata).then((t=>{console.log("Layouts added with ID: ",t.id)})).catch((t=>{console.error("Error adding Layouts: ",t)}))}else if("update"==this.formAction){const t=firebase.doc(firebase.firestore,"ocr-layouts",this.vdata._id);delete this.vdata._id,firebase.updateDoc(t,this.vdata).then((()=>{console.log("Document updated successfully")})).catch((t=>{console.error("Error updating document:",t)}))}},async removeData(t){if(confirm("Are you sure to delete?")){let a=firebase.doc(firebase.firestore,"ocr-layouts",t._id);await firebase.deleteDoc(a)}},async getData(){let t=this;const a=firebase.collection(firebase.firestore,"ocr-layouts");firebase.onSnapshot(a,(a=>{t.datanya=[],a.forEach((a=>{t.datanya.push({_id:a.id,...a.data()})}))}),(t=>{console.error("Error getting real-time collection:",t)}))}},async mounted(){this.getData()}},n=o,r=e(1001),d=(0,r.Z)(n,i,s,!1,null,null,null),l=d.exports}}]);
//# sourceMappingURL=page-index.5f620b0c.js.map