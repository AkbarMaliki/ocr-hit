"use strict";(self["webpackChunknew"]=self["webpackChunknew"]||[]).push([[523],{9660:function(t,e,i){i.r(e),i.d(e,{default:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[t._m(0),e("div",{staticStyle:{position:"absolute","z-index":"9999",top:"0",left:"0"}},t._l(t.scaledBoxes,(function(i,o){return e("div",{key:o,staticClass:"rectangle",style:t.getRectangleStyles(i)})})),0),e("video",{attrs:{id:"video",autoplay:"",muted:"",playsinline:""},domProps:{muted:!0}}),e("button",{attrs:{id:"captureBtn"},on:{click:t.capture}},[t._v("Capture Photo")]),e("button",{on:{click:t.cropPhoto}},[t._v("Crop Photo")]),e("canvas",{attrs:{id:"canvasElement"}}),e("img",{attrs:{id:"photoElement",src:"",alt:"Captured Photo"}}),t._l(t.listCropImage,(function(i,o){return e("div",{key:o,staticClass:"crop-image-container"},[t._v(" "+t._s(i)+" "),e("img",{attrs:{src:i,alt:"Cropped Photo"}})])}))],2)},n=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{position:"fixed",top:"0",left:"0","z-index":"9999"}},[e("div",{staticClass:"spinner-container"},[e("div",{staticClass:"spinner"})])])}],h=(i(7658),i(2801),i(1439),i(7585),i(5315),{data(){return{boxes:[{x:355,y:390,width:535,height:37},{x:353,y:427,width:693,height:40},{x:355,y:467,width:565,height:36},{x:357,y:504,width:605,height:36},{x:350,y:623,width:541,height:50},{x:243,y:1373,width:295,height:56}],scaledBoxes:[],height:1920,width:1080,listCropImage:[]}},methods:{capture(){const t=document.getElementById("canvasElement"),e=document.getElementById("photoElement");t.width=video.videoWidth,t.height=video.videoHeight,t.getContext("2d").drawImage(video,0,0,t.width,t.height);const i=t.toDataURL("image/jpeg");e.src=i},cropPhoto(){const t=document.getElementById("photoElement"),e=t.naturalWidth,i=t.naturalHeight,o=document.createElement("canvas");o.width=e,o.height=i;const n=o.getContext("2d");for(const h of this.boxes){const s=h.x/this.width*e,a=h.y/this.height*i,d=h.width/this.width*e,c=h.height/this.height*i;console.log("x",s),console.log("y",a),console.log("width",d),console.log("height",c),n.clearRect(0,0,o.width,o.height),n.drawImage(t,s,a,d,c,0,0,d,c);const l=o.toDataURL("image/jpeg");this.listCropImage.push(l)}console.log("listCropImage",this.listCropImage)},sendToApi(t){const e="https://hit-ocr.online/api/upload-ocr";function i(t,e){const i=t.split(","),o=i[0].match(/:(.*?);/)[1],n=atob(i[1]);let h=n.length;const s=new Uint8Array(h);while(h--)s[h]=n.charCodeAt(h);return new File([s],e,{type:o})}const o=i(t,"image.jpg"),n=new FormData;n.append("file",o,"image.jpg"),fetch(e,{method:"POST",body:n}).then((t=>t.json())).then((t=>{console.log(t)})).catch((t=>{console.error("Error:",t)}))},getRectangleStyles({x:t,y:e,width:i,height:o}){return{position:"absolute",left:`${t}px`,top:`${e}px`,width:`${i}px`,height:`${o}px`,border:"1px solid red"}},startVideo(){let t=this;const e=document.getElementById("video");navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:t.height},height:{ideal:t.width}}}).then((function(i){function o(t,e,i,o,n){const h=o/e,s=n/i,a=t.map((t=>({x:Math.round(t.x*h),y:Math.round(t.y*s),width:Math.round(t.width*h),height:Math.round(t.height*s)})));return a}t.$forceUpdate(),e.srcObject=i,e.play();const n=t.boxes;setTimeout((()=>{const e=document.getElementById("video"),i=t.width,h=t.height,s=e.clientWidth,a=e.clientHeight,d=o(n,i,h,s,a);t.scaledBoxes=d}),3e3)}))}},mounted(){this.startVideo()}}),s=h,a=i(1001),d=(0,a.Z)(s,o,n,!1,null,null,null),c=d.exports}}]);
//# sourceMappingURL=page-test.142af134.js.map